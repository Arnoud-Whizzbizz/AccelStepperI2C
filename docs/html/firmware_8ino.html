<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AccelStepperI2C: firmware.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AccelStepperI2C
   &#160;<span id="projectnumber">v 0.1</span>
   </div>
   <div id="projectbrief">I2C wrapper (and a bit more) for the AccelStepper Arduino library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('firmware_8ino.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">firmware.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;Wire.h&gt;</code><br />
<code>#include &lt;AccelStepper.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_accel_stepper_i2_c_8h.html">AccelStepperI2C.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="_simple_buffer_8h.html">SimpleBuffer.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for firmware.ino:</div>
<div class="dyncontent">
<div class="center"><img src="firmware_8ino__incl.png" border="0" usemap="#firmware_8ino" alt=""/></div>
<map name="firmware_8ino" id="firmware_8ino">
<area shape="rect" title=" " alt="" coords="73,5,167,32"/>
<area shape="rect" title=" " alt="" coords="183,229,260,256"/>
<area shape="rect" title=" " alt="" coords="22,80,82,107"/>
<area shape="rect" title=" " alt="" coords="67,155,178,181"/>
<area shape="rect" href="_accel_stepper_i2_c_8h.html" title="Arduino library for I2C&#45;control of stepper motors connected to another Arduino which runs the associa..." alt="" coords="158,80,290,107"/>
<area shape="rect" href="_simple_buffer_8h.html" title="simple and ugly serialization buffer for any types. Template technique adapted from Nick Gammon&#39;s I2C..." alt="" coords="259,155,365,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_endstop.html">Endstop</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_stepper.html">Stepper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a89333e2eef9e4e7e839ad76c3abd1aa8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a89333e2eef9e4e7e839ad76c3abd1aa8">DEBUG_AccelStepperI2C</a></td></tr>
<tr class="separator:a89333e2eef9e4e7e839ad76c3abd1aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66726e5f1a55e7253ddd5aeec06f19c3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a66726e5f1a55e7253ddd5aeec06f19c3">log</a>(...)&#160;&#160;&#160;Serial.print(__VA_ARGS__)</td></tr>
<tr class="separator:a66726e5f1a55e7253ddd5aeec06f19c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="memdesc:a4fc01d736fe50cf5b977f755b675f11d"><td class="mdescLeft">&#160;</td><td class="mdescRight">setup system  <a href="firmware_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">More...</a><br /></td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a8610cdcfb2697510a8ee83499558e"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#ae2a8610cdcfb2697510a8ee83499558e">addStepper</a> (uint8_t interface=AccelStepper::FULL4WIRE, uint8_t pin1=2, uint8_t pin2=3, uint8_t pin3=4, uint8_t pin4=5, bool enable=true)</td></tr>
<tr class="memdesc:ae2a8610cdcfb2697510a8ee83499558e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assign and initialize new stepper. Calls the <a href="https://www.airspayce.com/mikem/arduino/AccelStepper/classAccelStepper.html#a3bc75bd6571b98a6177838ca81ac39ab">AccelStepper's[1/2] constructor</a>  <a href="firmware_8ino.html#ae2a8610cdcfb2697510a8ee83499558e">More...</a><br /></td></tr>
<tr class="separator:ae2a8610cdcfb2697510a8ee83499558e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e3313868c67fbcdc7a267c53ad4339"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a99e3313868c67fbcdc7a267c53ad4339">readEndstops</a> (uint8_t s)</td></tr>
<tr class="separator:a99e3313868c67fbcdc7a267c53ad4339"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a52aa0319b0d3bea95eff4528baee98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a9a52aa0319b0d3bea95eff4528baee98">receiveEvent</a> (int howMany)</td></tr>
<tr class="memdesc:a9a52aa0319b0d3bea95eff4528baee98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle I2C receive event. Just read the message and inform main loop.  <a href="firmware_8ino.html#a9a52aa0319b0d3bea95eff4528baee98">More...</a><br /></td></tr>
<tr class="separator:a9a52aa0319b0d3bea95eff4528baee98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4906408a38ad9d4f1bca763aa75422ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a4906408a38ad9d4f1bca763aa75422ad">processMessage</a> (uint8_t len)</td></tr>
<tr class="memdesc:a4906408a38ad9d4f1bca763aa75422ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process message receive via I2C. Normal messages consist of at least three bytes: [0] CRC8 checksum [1] Command. Most commands correspond to an AccelStepper function, some are new for I2C reasons (see I2C_commands.h). Unknown commands are ignored. [2] Number of the stepper that is to receive the command. If no stepper with this number exists, the message is ignored, except for general commands like resetCmd, which ignore this parameter. [3 - maxBuffer] Optional parameter bytes. Each command that comes with too many or too few parameter bytes is ignored.  <a href="firmware_8ino.html#a4906408a38ad9d4f1bca763aa75422ad">More...</a><br /></td></tr>
<tr class="separator:a4906408a38ad9d4f1bca763aa75422ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10b80b8aaeaf66cecbf0bb5eff5ae33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#ac10b80b8aaeaf66cecbf0bb5eff5ae33">requestEvent</a> ()</td></tr>
<tr class="memdesc:ac10b80b8aaeaf66cecbf0bb5eff5ae33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle I2C request event. Will send results or information requested by the last command, as defined by the contents of the outputBuffer.  <a href="firmware_8ino.html#ac10b80b8aaeaf66cecbf0bb5eff5ae33">More...</a><br /></td></tr>
<tr class="separator:ac10b80b8aaeaf66cecbf0bb5eff5ae33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8530ad8ad18d1759d6e12100e31723e5"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a8530ad8ad18d1759d6e12100e31723e5">I2C_address</a> = 0x8</td></tr>
<tr class="separator:a8530ad8ad18d1759d6e12100e31723e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225b90ea852718642d5e87758dbd045b"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a225b90ea852718642d5e87758dbd045b">maxBuffer</a> = 16</td></tr>
<tr class="separator:a225b90ea852718642d5e87758dbd045b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eca28b463b5850006c7d00aa43a2498"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_simple_buffer.html">SimpleBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a9eca28b463b5850006c7d00aa43a2498">bufferIn</a></td></tr>
<tr class="separator:a9eca28b463b5850006c7d00aa43a2498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d39df1bc00243ef2abb1ad3cc1acf8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_simple_buffer.html">SimpleBuffer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a4d39df1bc00243ef2abb1ad3cc1acf8e">bufferOut</a></td></tr>
<tr class="separator:a4d39df1bc00243ef2abb1ad3cc1acf8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd9824af02dde7126d00d43a74c0081"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#affd9824af02dde7126d00d43a74c0081">newMessage</a> = 0</td></tr>
<tr class="separator:affd9824af02dde7126d00d43a74c0081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa84ea5f47409c6c60bc911ba4bc06fb0"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#aa84ea5f47409c6c60bc911ba4bc06fb0">maxEndstops</a> = 2</td></tr>
<tr class="separator:aa84ea5f47409c6c60bc911ba4bc06fb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b5902c36f57eccdc4e911f63edcd14b"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a4b5902c36f57eccdc4e911f63edcd14b">maxSteppers</a> = 8</td></tr>
<tr class="separator:a4b5902c36f57eccdc4e911f63edcd14b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934d4bb4e78577919e2263a73d4e330e"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a934d4bb4e78577919e2263a73d4e330e">numSteppers</a> = 0</td></tr>
<tr class="separator:a934d4bb4e78577919e2263a73d4e330e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2bb33438b8fee4c8efcfb717ed4fcbf"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="struct_stepper.html">Stepper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#aa2bb33438b8fee4c8efcfb717ed4fcbf">steppers</a> [<a class="el" href="firmware_8ino.html#a4b5902c36f57eccdc4e911f63edcd14b">maxSteppers</a>]</td></tr>
<tr class="separator:aa2bb33438b8fee4c8efcfb717ed4fcbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470ac2a95380c26878282f7ddf529de"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#af470ac2a95380c26878282f7ddf529de">resetFunc</a> )(void)=0</td></tr>
<tr class="separator:af470ac2a95380c26878282f7ddf529de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a5acb9b13b943cac9ef0b8c8370100"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#ad2a5acb9b13b943cac9ef0b8c8370100">now</a></td></tr>
<tr class="memdesc:ad2a5acb9b13b943cac9ef0b8c8370100"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop, implements the state machine (everything else is done in the I2C-interrupts). Will check for each stepper's state and do the appropriate polling (run() etc.) as needed.  <a href="firmware_8ino.html#ad2a5acb9b13b943cac9ef0b8c8370100">More...</a><br /></td></tr>
<tr class="separator:ad2a5acb9b13b943cac9ef0b8c8370100"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570420b17131e93d2c3ff7665f121800"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a570420b17131e93d2c3ff7665f121800">then</a> = millis()</td></tr>
<tr class="separator:a570420b17131e93d2c3ff7665f121800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9405df89f8c78a1f50085b10911ca37"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#af9405df89f8c78a1f50085b10911ca37">cycles</a> = 0</td></tr>
<tr class="separator:af9405df89f8c78a1f50085b10911ca37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e882aeffdf111848ef1647b42fe1dde"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_8ino.html#a4e882aeffdf111848ef1647b42fe1dde">reportNow</a> = true</td></tr>
<tr class="separator:a4e882aeffdf111848ef1647b42fe1dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a89333e2eef9e4e7e839ad76c3abd1aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89333e2eef9e4e7e839ad76c3abd1aa8">&#9670;&nbsp;</a></span>DEBUG_AccelStepperI2C</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_AccelStepperI2C</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a66726e5f1a55e7253ddd5aeec06f19c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66726e5f1a55e7253ddd5aeec06f19c3">&#9670;&nbsp;</a></span>log</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define log</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td>&#160;&#160;&#160;Serial.print(__VA_ARGS__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae2a8610cdcfb2697510a8ee83499558e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a8610cdcfb2697510a8ee83499558e">&#9670;&nbsp;</a></span>addStepper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t addStepper </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>interface</em> = <code>AccelStepper::FULL4WIRE</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin1</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin2</em> = <code>3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin3</em> = <code>4</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin4</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Assign and initialize new stepper. Calls the <a href="https://www.airspayce.com/mikem/arduino/AccelStepper/classAccelStepper.html#a3bc75bd6571b98a6177838ca81ac39ab">AccelStepper's[1/2] constructor</a> </p>
<dl class="section return"><dt>Returns</dt><dd>number of stepper assigned to new stepper, -1 for error </dd></dl>
<dl class="section note"><dt>Note</dt><dd>&lt; a href="https://www.airspayce.com/mikem/arduino/AccelStepper/classAccelStepper.html#afa3061ce813303a8f2fa206ee8d012bd"&gt; AccelStepper()[2/2] constructor currently unsupported </dd></dl>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4906408a38ad9d4f1bca763aa75422ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4906408a38ad9d4f1bca763aa75422ad">&#9670;&nbsp;</a></span>processMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processMessage </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process message receive via I2C. Normal messages consist of at least three bytes: [0] CRC8 checksum [1] Command. Most commands correspond to an AccelStepper function, some are new for I2C reasons (see I2C_commands.h). Unknown commands are ignored. [2] Number of the stepper that is to receive the command. If no stepper with this number exists, the message is ignored, except for general commands like resetCmd, which ignore this parameter. [3 - maxBuffer] Optional parameter bytes. Each command that comes with too many or too few parameter bytes is ignored. </p>
<dl class="section note"><dt>Note</dt><dd>Blocking functions <a class="el" href="_accel_stepper_i2_c_8h.html#a170d54f56d535f30b6cb09321e89c754">runToPositionCmd()</a> and <a class="el" href="_accel_stepper_i2_c_8h.html#ab6da5e42caa09167ae7c403ab66d53b8">runToNewPositionCmd()</a> not implemented here. Blocking at the slave's side seems not too useful, as the master won't wait for us anyway, </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>but maybe do it in the library? </dd></dl>

</div>
</div>
<a id="a99e3313868c67fbcdc7a267c53ad4339"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99e3313868c67fbcdc7a267c53ad4339">&#9670;&nbsp;</a></span>readEndstops()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t readEndstops </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9a52aa0319b0d3bea95eff4528baee98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a52aa0319b0d3bea95eff4528baee98">&#9670;&nbsp;</a></span>receiveEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void receiveEvent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>howMany</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle I2C receive event. Just read the message and inform main loop. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd><del>Just read the buffer here, move interpretation out of the interrupt.</del> </dd></dl>

</div>
</div>
<a id="ac10b80b8aaeaf66cecbf0bb5eff5ae33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac10b80b8aaeaf66cecbf0bb5eff5ae33">&#9670;&nbsp;</a></span>requestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void requestEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle I2C request event. Will send results or information requested by the last command, as defined by the contents of the outputBuffer. </p>
<h3>If nothing to send, it sends a 8 bit summary of all defined stepper's results</h3>
<p>from manul calls to one of the run commands </p>
<h3>find sth. meaningful to report if no message is pending</h3>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>setup system </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9eca28b463b5850006c7d00aa43a2498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eca28b463b5850006c7d00aa43a2498">&#9670;&nbsp;</a></span>bufferIn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_simple_buffer.html">SimpleBuffer</a>* bufferIn</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4d39df1bc00243ef2abb1ad3cc1acf8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d39df1bc00243ef2abb1ad3cc1acf8e">&#9670;&nbsp;</a></span>bufferOut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_simple_buffer.html">SimpleBuffer</a>* bufferOut</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af9405df89f8c78a1f50085b10911ca37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9405df89f8c78a1f50085b10911ca37">&#9670;&nbsp;</a></span>cycles</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t cycles = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8530ad8ad18d1759d6e12100e31723e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8530ad8ad18d1759d6e12100e31723e5">&#9670;&nbsp;</a></span>I2C_address</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t I2C_address = 0x8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a225b90ea852718642d5e87758dbd045b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225b90ea852718642d5e87758dbd045b">&#9670;&nbsp;</a></span>maxBuffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t maxBuffer = 16</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa84ea5f47409c6c60bc911ba4bc06fb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa84ea5f47409c6c60bc911ba4bc06fb0">&#9670;&nbsp;</a></span>maxEndstops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t maxEndstops = 2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b5902c36f57eccdc4e911f63edcd14b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b5902c36f57eccdc4e911f63edcd14b">&#9670;&nbsp;</a></span>maxSteppers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t maxSteppers = 8</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="affd9824af02dde7126d00d43a74c0081"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd9824af02dde7126d00d43a74c0081">&#9670;&nbsp;</a></span>newMessage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t newMessage = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad2a5acb9b13b943cac9ef0b8c8370100"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a5acb9b13b943cac9ef0b8c8370100">&#9670;&nbsp;</a></span>now</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t now</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main loop, implements the state machine (everything else is done in the I2C-interrupts). Will check for each stepper's state and do the appropriate polling (run() etc.) as needed. </p>

</div>
</div>
<a id="a934d4bb4e78577919e2263a73d4e330e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a934d4bb4e78577919e2263a73d4e330e">&#9670;&nbsp;</a></span>numSteppers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t numSteppers = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4e882aeffdf111848ef1647b42fe1dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e882aeffdf111848ef1647b42fe1dde">&#9670;&nbsp;</a></span>reportNow</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reportNow = true</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af470ac2a95380c26878282f7ddf529de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af470ac2a95380c26878282f7ddf529de">&#9670;&nbsp;</a></span>resetFunc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* resetFunc) (void)=0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa2bb33438b8fee4c8efcfb717ed4fcbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2bb33438b8fee4c8efcfb717ed4fcbf">&#9670;&nbsp;</a></span>steppers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="struct_stepper.html">Stepper</a> steppers[<a class="el" href="firmware_8ino.html#a4b5902c36f57eccdc4e911f63edcd14b">maxSteppers</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a570420b17131e93d2c3ff7665f121800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a570420b17131e93d2c3ff7665f121800">&#9670;&nbsp;</a></span>then</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t then = millis()</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d9edf6c004b4a7ff14fe9ae7a92214ee.html">firmware</a></li><li class="navelem"><a class="el" href="firmware_8ino.html">firmware.ino</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
